# =============================================
# Backend environment configuration (EXAMPLE)
# Copy to `backend/.env` and fill values.
# Never commit real secrets.
#
# NOTE: This repo's editor tooling may block `.env*` files; if so,
# rename this file to `.env.example` locally.
# =============================================

# ---------------------------------------------
# Runtime
# ---------------------------------------------
NODE_ENV=development
SERVER_PORT=4000

# ---------------------------------------------
# Database (REQUIRED)
# ---------------------------------------------
# MongoDB connection string
# Example local: mongodb://127.0.0.1:27017/your_db_name
MONGO_URL=

# ---------------------------------------------
# Auth / JWT (REQUIRED)
# ---------------------------------------------
# Strong random secret (at least 32 chars)
JWT_KEY=

# Token expiry used by /login (default: 1h)
JWT_EXPIRES_IN=1h

# ---------------------------------------------
# Frontend/Admin URLs (RECOMMENDED)
# Used for CORS allowlist + building return/cancel URLs
# ---------------------------------------------
# Public site origin (no trailing slash), e.g. https://your-site.com
HOST=http://127.0.0.1:5500

# Admin site origin, e.g. https://admin.your-site.com
ADMIN_URL=

# Optional additional allowed origin (legacy)
FULLHOST=

# API base URL (used for a few redirects/links). If you include a path like /api,
# the backend will still extract the origin for CORS.
API_URL=http://localhost:4000

# ---------------------------------------------
# Stripe (REQUIRED if using Stripe payments)
# ---------------------------------------------
STRIPE_SECRET_KEY=

# Stripe webhook signing secret
WEBHOOK_SEC=

# ---------------------------------------------
# PayPal (REQUIRED if using PayPal payments)
# ---------------------------------------------
PAYPAL_CLIENT_ID=
PAYPAL_CLIENT_SECRET=

# Defaults to sandbox if not set. In production, set to live:
# https://api-m.paypal.com
PAYPAL_BASE_URL=https://api-m.sandbox.paypal.com

# ---------------------------------------------
# Currency conversion (REQUIRED for PayPal order math)
# ---------------------------------------------
# USD -> ILS rate used to convert item.price (ILS) to USD
USD_ILS_RATE=3.6

# ---------------------------------------------
# Rate limiting (optional; sane defaults exist)
# ---------------------------------------------
# Max requests per IP per 15 minutes for auth endpoints
RATE_LIMIT_AUTH_MAX=20

# Max requests per IP per 15 minutes for payment endpoints
RATE_LIMIT_PAYMENT_MAX=60

# Max requests per IP per 15 minutes for admin endpoints (uploads/product management)
RATE_LIMIT_ADMIN_MAX=120

# ---------------------------------------------
# Upload limits (optional; defaults exist)
# ---------------------------------------------
# Max file size per upload (MB)
UPLOAD_MAX_FILE_SIZE_MB=50

# Max number of files per request (1 main + up to N small)
UPLOAD_MAX_FILES=11

# ---------------------------------------------
# DigitalOcean Spaces (S3 compatible)
# REQUIRED in production if you rely on uploads (App Platform filesystem is ephemeral)
# ---------------------------------------------
SPACES_BUCKET=
SPACES_REGION=
# Example: https://fra1.digitaloceanspaces.com
SPACES_ENDPOINT=
SPACES_KEY=
SPACES_SECRET=

# Optional CDN base URL. If set, generated public URLs will prefer this.
SPACES_CDN_BASE_URL=

# ---------------------------------------------
# Debugging (optional)
# ---------------------------------------------
DEBUG_RUN_ID=


