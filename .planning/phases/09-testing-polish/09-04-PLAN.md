---
phase: 09-testing-polish
plan: 04
type: execute
wave: 2
depends_on: ["09-01", "09-02", "09-03"]
files_modified:
  - admin/BisliView.js
  - backend/index.js
  - .planning/phases/09-testing-polish/09-BUGS.md
autonomous: true

must_haves:
  truths:
    - "All blocking bugs from testing are fixed"
    - "All high-priority bugs from testing are fixed"
    - "Bug catalog updated with fix status"
  artifacts:
    - path: ".planning/phases/09-testing-polish/09-BUGS.md"
      provides: "Bug catalog with fix status"
      contains: "Status: FIXED"
  key_links:
    - from: "Bug fixes"
      to: "Test results"
      via: "Bug IDs"
      pattern: "BUG-.*FIXED"
---

<objective>
Batch fix all bugs discovered during Phase 9 testing (Plans 01, 02, 03).

Purpose: Per CONTEXT.md "Fix vs Document Approach" - document issues during testing, fix all at end (batch fixes). This plan executes the batch fix phase.

Output: All blocking and high-priority bugs fixed, 09-BUGS.md updated with fix status
</objective>

<execution_context>
@C:\Users\pagis\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\pagis\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-testing-polish/09-CONTEXT.md
@.planning/phases/09-testing-polish/09-TEST-RESULTS.md
@.planning/phases/09-testing-polish/09-BUGS.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Triage Bug Catalog</name>
  <files>.planning/phases/09-testing-polish/09-BUGS.md</files>
  <action>
Review 09-BUGS.md and triage bugs for batch fixing.

**Triage Categories:**

1. **BLOCKING** - Must fix for v1.1 ship
   - Core functionality broken
   - Data integrity issues
   - Security vulnerabilities

2. **HIGH** - Should fix for v1.1 if time permits
   - Significant UX issues
   - Missing expected behavior
   - Accessibility issues affecting usability

3. **MEDIUM** - Defer to v1.2
   - Minor UX issues
   - Edge cases
   - Touch device issues (per CONTEXT.md)

4. **LOW** - Defer to v1.2+
   - Cosmetic issues
   - Nice-to-have improvements
   - Performance optimizations for future scale

**Update 09-BUGS.md with triage:**
```markdown
## Bug Triage Summary

### Blocking (must fix for v1.1)
- [ ] BUG-XXX: [description]

### High (should fix for v1.1)
- [ ] BUG-XXX: [description]

### Medium (defer to v1.2)
- [ ] BUG-XXX: [description]

### Low (defer to v1.2+)
- [ ] BUG-XXX: [description]
```

**Expected Outcomes Based on CONTEXT.md:**
- Touch drag issues: MEDIUM (defer per user decision)
- Keyboard reordering gap: MEDIUM (SortableJS limitation, defer)
- Memory/performance issues: Depends on severity
- RTL issues: Depends on severity

**If no bugs in 09-BUGS.md:** Document "No bugs found during testing" and mark this task complete.
  </action>
  <verify>
- 09-BUGS.md contains triage summary section
- Each bug has priority assignment
- Blocking and high bugs identified for fixing
  </verify>
  <done>
Bug triage complete. Blocking and high priority bugs identified for batch fixing.
  </done>
</task>

<task type="auto">
  <name>Task 2: Fix Blocking and High Priority Bugs</name>
  <files>admin/BisliView.js, backend/index.js, .planning/phases/09-testing-polish/09-BUGS.md</files>
  <action>
Fix all BLOCKING and HIGH priority bugs from the triage.

**For each bug:**

1. Read bug description from 09-BUGS.md
2. Locate affected file(s)
3. Implement fix
4. Test fix locally
5. Update 09-BUGS.md:
   ```markdown
   ### BUG-XXX: [description]
   - **Status:** FIXED
   - **Fix:** [brief description of change]
   - **Commit:** [will be added after commit]
   ```

**Common Bug Types and Fixes:**

**Keyboard Accessibility (if blocking):**
- If modal focus trap not working: Review 08-05 implementation
- If undo/redo shortcuts broken: Check key event handlers

**Memory Leaks (if found):**
- Detached DOM nodes: Ensure event listeners removed on cleanup
- SortableJS orphans: Call sortable.destroy() on exit reorder mode
- Modal cleanup: Remove modal from DOM on close

**Concurrent Admin (if 409 not working):**
- Review optimistic locking implementation
- Ensure version field compared correctly
- Ensure refresh on conflict

**RTL Issues (if blocking):**
- CSS direction issues: Add RTL-specific styles
- Drag direction: SortableJS handles RTL automatically if direction:rtl set

**Note:** If bug requires significant architectural change, document as "DEFERRED - requires architecture change" and explain.
  </action>
  <verify>
- All BLOCKING bugs marked as FIXED in 09-BUGS.md
- All HIGH bugs marked as FIXED (or justified deferral)
- Each fix tested locally
  </verify>
  <done>
All blocking and high priority bugs fixed. 09-BUGS.md updated with fix status.
  </done>
</task>

<task type="auto">
  <name>Task 3: Commit Bug Fixes</name>
  <files>.planning/phases/09-testing-polish/09-BUGS.md</files>
  <action>
Commit all bug fixes with clear commit messages.

**If bugs were fixed:**
```bash
git add -A
git commit -m "fix(09): batch fix Phase 9 testing bugs

Fixes:
- BUG-XXX: [brief description]
- BUG-YYY: [brief description]

Deferred to v1.2:
- BUG-ZZZ: [reason]

Co-Authored-By: Claude <noreply@anthropic.com>"
```

**Update 09-BUGS.md with commit hash:**
```markdown
### BUG-XXX: [description]
- **Status:** FIXED
- **Fix:** [description]
- **Commit:** [commit hash]
```

**If no bugs needed fixing:**
Skip commit, document in summary.
  </action>
  <verify>
- Git commit created (if fixes made)
- 09-BUGS.md updated with commit references
- Working tree clean
  </verify>
  <done>
Bug fixes committed. 09-BUGS.md updated with commit references.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. All BLOCKING bugs fixed
2. All HIGH bugs fixed (or justified deferral)
3. 09-BUGS.md reflects final status of all bugs
4. Fixes committed to git
</verification>

<success_criteria>
- Zero BLOCKING bugs remain unfixed
- Zero HIGH bugs remain unfixed (unless justified deferral)
- All MEDIUM/LOW bugs documented as v1.2 deferrals
- Bug catalog complete with fix status and commit references
</success_criteria>

<output>
After completion, create `.planning/phases/09-testing-polish/09-04-SUMMARY.md`
</output>
